<div class="table-container">
  <input placeholder="Search..." type="text" (input)="filterTerm.set($event.target.value)" class="search-input" />

  <table class="budget-table">
    <thead>
      <tr>
        <th>Budget Name</th>
        <th>Status</th>
        <th>Start Year</th>
        <th>Duration</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let row of filteredBudgets()">
        <td>
          {{ row.name || '-' }}
          <span *ngIf="row.childrenList?.length > 0" class="badge primary" (click)="openChildBudgetDialog(row)">
            Linked Budgets ({{ row.childrenList.length }})
          </span>
        </td>
        <td>
          <span class="badge" [ngClass]="row.status === 1 ? 'active' : 'draft'">
            {{ translateStatus(row.status) | transloco }}
          </span>
        </td>
        <td>{{ row.startYear || '-' }}</td>
        <td>{{ row.duration || '-' }}</td>
        <td>
          <div class="budget-btn-container">
            <button *ngIf="access('clone')" mat-mini-fab (click)="openCloneBudgetDialog(row)">
              <i class="fas fa-copy fa-sm"></i>
            </button>
            <button *ngIf="access('view')" mat-mini-fab (click)="goToDetail(row.id!, 'view')">
              <i class="fas fa-eye fa-sm"></i>
            </button>
            <button *ngIf="access('edit')" mat-mini-fab (click)="goToDetail(row.id!, 'edit')">
              <i class="fas fa-edit fa-sm"></i>
            </button>
            <button mat-mini-fab (click)="openShareBudgetDialog(row)">
              <i class="fas fa-trash-alt fa-sm"></i>
            </button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
